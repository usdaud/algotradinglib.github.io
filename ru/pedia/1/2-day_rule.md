# Правило 2 дней

Правило 2 дней (2-Day Rule) — тактическое правило в финансовых рынках и алгоритмической торговле. Оно пытается использовать краткосрочные ценовые паттерны для прогнозирования будущих движений. Правило основано на предположении, что актив, который существенно движется в одном направлении в течение двух дней, с высокой вероятностью продолжит движение или развернется.

## Основа правила 2 дней

Правило 2 дней опирается на более широкие принципы возврата к среднему и импульсной торговли:

1. **Возврат к среднему**: предполагается, что цены стремятся возвращаться к историческим средним или трендам. Поэтому резкое движение за два дня может быть скорректировано разворотом.

2. **Импульс**: теория импульса предполагает, что активы, показавшие значимое движение в одном направлении за два дня, могут продолжить движение, поскольку участники рынка следуют за трендом.

## Исторический контекст и происхождение

Правило 2 дней часто связывают с работами рыночных техников и исследователей, изучавших краткосрочные неэффективности. Это не строгая академическая концепция, но она активно распространялась практиками рынка и алгоритмическими стратегиями на протяжении многих лет.

## Применение в алгоритмической торговле

Алгоритмическая торговля использует заранее заданные правила и вычислительные модели для исполнения сделок. Правило 2 дней может интегрироваться в такие алгоритмы для генерации торговых сигналов:

1. **Сбор данных**: алгоритм собирает исторические данные цен актива.
2. **Генерация сигналов**:
 - **Сигнал разворота**: если цена актива существенно выросла или упала за два дня, алгоритм может сформировать сигнал на продажу или покупку, ожидая откат.
 - **Сигнал продолжения**: некоторые варианты правила дают сигнал на покупку или продажу, если ожидается продолжение тренда.
3. **Исполнение**: после формирования сигнала алгоритм исполняет сделку по заданным параметрам, например с уровнями стоп-лосса и тейк-профита.
4. **Оценка**: после сделки результаты анализируются, а алгоритм дорабатывается.

## Практические соображения

При использовании правила 2 дней важно учитывать:

- **Волатильность**: высоковолатильные акции могут давать более выраженные развороты и лучше подходить для стратегий возврата к среднему.
- **Управление риском**: корректные стоп-лоссы и размер позиции критичны для защиты от резких движений.
- **Бэктестинг**: качественный бэктестинг на исторических данных позволяет проверить эффективность правила.
- **Рыночные условия**: эффективность правила может меняться в бычьем, медвежьем или нейтральном рынке.

## Ограничения и критика

Хотя правило 2 дней предлагает простой подход, оно имеет и ограничения:

- **Переопора на краткосрочные данные**: рынки зависят от множества факторов, и анализ двух дней может упрощать реальность.
- **Риск «пилы»**: частые краткосрочные сделки увеличивают издержки и риск резких разворотов.
- **Смещение выживших**: бэктесты без учета делистинга могут искажать результаты.

## Пример алгоритмического подхода

Рассмотрим гипотетический алгоритм, использующий правило 2 дней для стратегии возврата к среднему:

### Псевдокод

```python
# Assume we have access to historical price data

# Step 1: Define the time window
lookback_period = 2

# Step 2: Define thresholds for significant movements
price_threshold = 2.0 # 2% move is considered significant

# Step 3: Collect historical prices
historical_prices = get_historical_prices('AAPL')

# Step 4: Calculate price changes over the lookback period
for i in range(lookback_period, len(historical_prices)):
    price_change = (historical_prices[i] - historical_prices[i-lookback_period]) / historical_prices[i-lookback_period] * 100
    
    # Step 5: Generate signals based on price change
    if price_change >= price_threshold:
        # Significant rise, potential reversal signal
        signal = 'sell'
    elif price_change <= -price_threshold:
        # Significant drop, potential reversal signal
        signal = 'buy'
    else:
        signal = 'hold'
    
    # Execute the trade based on the signal
    execute_trade(signal)
```

## Реальные внедрения и примеры успеха

Некоторые хедж-фонды и торговые фирмы внедряли вариации правила 2 дней в составе более широких стратегий. Среди них:

- **Renaissance Technologies**: известна фондом Medallion и использует множество краткосрочных моделей. Детали закрыты, но элементы правила 2 дней часто присутствуют в сложных количественных моделях.
- **Two Sigma Investments**: лидер в алго-трейдинге, использующий подходы, которые могут включать краткосрочные ценовые паттерны, похожие на правило 2 дней.

## Заключение

Правило 2 дней показывает, как простые эвристики могут работать внутри сложных алгоритмических стратегий. Оно основано на возврате к среднему и импульсе — ключевых рыночных эффектах, которые можно использовать для получения прибыли. Однако успех зависит от тщательного бэктестинга, управления рисками и постоянной настройки стратегии под меняющиеся условия рынка.
