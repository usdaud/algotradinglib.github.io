# Паттерн 1-2-3

Паттерн 1-2-3 — известный и простой, но эффективный инструмент технического анализа, который используют трейдеры, особенно в алгоритмической торговле. Этот паттерн часто применяют для определения возможных разворотов тренда на финансовых рынках. Он состоит из трех характерных точек, формирующих структуру, которая может указывать на бычий или медвежий разворот. Несмотря на простоту, паттерн популярен у трейдеров благодаря способности находить точки разворота цены.

### Анатомия паттерна 1-2-3

Паттерн 1-2-3 бывает бычьим или медвежьим, в зависимости от формирования:

- **Бычий паттерн 1-2-3:** указывает на возможный разворот от нисходящего тренда к восходящему.
- **Медвежий паттерн 1-2-3:** указывает на возможный разворот от восходящего тренда к нисходящему.

#### Бычий паттерн 1-2-3
1. **Точка 1: самый низкий минимум недавнего нисходящего тренда.**
2. **Точка 2: последующий максимум (выше точки 1).**
3. **Точка 3: более высокий минимум, который остается выше точки 1, но ниже точки 2.**

Когда точка 3 сформирована, пробой выше точки 2 подтверждает бычий разворот.

```markdown
              Point 2
                /\
               /  \
Point 3      /     \ 
  \        /         \
   \      /           \
    \    /             Point 1
```

#### Медвежий паттерн 1-2-3
1. **Точка 1: самый высокий максимум недавнего восходящего тренда.**
2. **Точка 2: последующий минимум (ниже точки 1).**
3. **Точка 3: более низкий максимум, который остается ниже точки 1, но выше точки 2.**

Когда точка 3 сформирована, пробой ниже точки 2 подтверждает медвежий разворот.

```markdown
 Point 1
     /\
    /  \
   /    \
  /      \
 /        \      Point 3
/          \    /
           \/  /            
            \/  
            Point 2
```

### Шаги для определения паттерна 1-2-3

1. **Определите тренд:** сначала подтвердите текущий тренд. Для бычьего паттерна 1-2-3 должен быть нисходящий тренд, для медвежьего — восходящий.
2. **Найдите точку 1:** определите самый низкий минимум в нисходящем тренде (для бычьего паттерна) или самый высокий максимум в восходящем тренде (для медвежьего).
3. **Найдите точку 2:** для бычьего паттерна это последующий максимум (выше точки 1), для медвежьего — последующий минимум (ниже точки 1).
4. **Найдите точку 3:** для бычьего паттерна — более высокий минимум (выше точки 1, но ниже точки 2), для медвежьего — более низкий максимум (ниже точки 1, но выше точки 2).
5. **Подтвердите пробой:** паттерн подтверждается, когда цена пробивает выше точки 2 (бычий) или ниже точки 2 (медвежий).

### Применение в алгоритмической торговле

Алгоритмическая торговля (algo-trading) предполагает использование автоматизированных торговых стратегий для исполнения сделок по заранее заданным правилам. Паттерн 1-2-3 можно формализовать в алгоритмическую стратегию для работы на потенциальных разворотах тренда.

Вот как паттерн 1-2-3 можно включить в алгоритмическую торговую стратегию:

1. **Задать параметры:** определить критерии поиска точек 1, 2 и 3 по историческим данным.
2. **Интегрировать с техническими индикаторами:** объединить паттерн 1-2-3 с индикаторами (скользящие средние, RSI, MACD) для повышения точности сигналов разворота.
3. **Разработать правила входа и выхода:** прописать алгоритмы покупки при пробое выше точки 2 (бычий сигнал) или продажи при пробое ниже точки 2 (медвежий сигнал).
4. **Провести бэктест стратегии:** протестировать на исторических данных, чтобы оценить устойчивость и эффективность.
5. **Внедрить риск-менеджмент:** добавить стоп-лосс и тейк-профит для управления риском и защиты от значительных потерь.

### Пример алгоритма для паттерна 1-2-3 на Python (псевдокод)

```python
import pandas as pd
import numpy as np

def identify_123_pattern(data):
    data['High'] = data['Close'].rolling(window=5).max()
    data['Low'] = data['Close'].rolling(window=5).min()
    data.dropna(inplace=True)
    
    points = []
    
    for i in range(len(data)):
        if i > 5 and i < len(data) - 5:
            
            Point_1 = data['Low'][i-5:i].min()
            Point_2 = data['High'][i-5:i].max()
            Point_3 = data['Low'][i-3:i].min()
            
            if Point_1 < Point_3 < Point_2:
                pattern = 'Bullish'
                points.append({'Point_1': Point_1, 'Point_2': Point_2, 'Point_3': Point_3, 'Type': pattern})
                
            elif Point_1 > Point_3 > Point_2:
                pattern = 'Bearish'
                points.append({'Point_1': Point_1, 'Point_2': Point_2, 'Point_3': Point_3, 'Type': pattern})

    return points

# Example usage:
data = pd.read_csv('historical_data.csv')
patterns = identify_123_pattern(data)
print(patterns)
```

### Соображения и сложности

1. **Ложные сигналы:** паттерн 1-2-3 может давать ложные сигналы, особенно в боковом рынке. Важно комбинировать его с другими инструментами подтверждения.
2. **Рыночные условия:** эффективность паттерна зависит от рыночных условий. В трендовых рынках он работает лучше, чем в диапазонных.
3. **Сложность алгоритма:** хотя поиск паттерна кажется простым, его реализация в алгоритмической стратегии требует учета различных рыночных сценариев, риск-менеджмента и методов оптимизации.

### Популярные платформы для алгоритмической торговли

Несколько платформ предоставляют инструменты и среду для разработки и тестирования алгоритмических стратегий на основе таких паттернов, как 1-2-3:

1. **StockSharp:** платформа с открытым исходным кодом, предоставляющая данные и инструменты для разработки, бэктеста и запуска торговых стратегий.
2. **MetaTrader 5 (MT5):** популярная торговая платформа с продвинутым техническим анализом, возможностями алгоритмической торговли и копированием сделок.
3. **NinjaTrader:** торговая платформа с расширенными графиками, аналитикой и разработкой автоматизированных стратегий.
4. **TradeStation:** платформа с набором торговых инструментов, аналитикой, построением стратегий и возможностями бэктеста.

### Заключение

Паттерн 1-2-3 — простой, но мощный инструмент для поиска потенциальных разворотов тренда на финансовых рынках. Его простота делает его доступным, а эффективность — полезным для ручной и алгоритмической торговли. Понимание и применение этого паттерна в алгоритмической стратегии помогает лучше использовать рыночные развороты и улучшать общую результативность торговли.
