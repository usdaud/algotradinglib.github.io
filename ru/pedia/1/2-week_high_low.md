# Стратегия 2-недельного максимума/минимума

### Введение

Стратегия 2-недельного максимума/минимума — распространенный метод в алгоритмической торговле, который использует максимальные и минимальные цены инструмента за 14-дневный период для принятия торговых решений. Эта стратегия популярна благодаря простоте и эффективности при поиске потенциальных точек пробоя и разворота на рынке.

### Определение

В контексте торговли акциями 2-недельный максимум/минимум — это наивысшая и наименьшая цена, по которой акция торговалась в течение последних 14 торговых дней. Эти уровни используются трейдерами как важные ориентиры для предположений о дальнейшем движении цены.

### Компоненты стратегии

1. **Определение максимума и минимума:**
 Основной элемент стратегии — поиск самых высоких и самых низких цен за последние 14 торговых дней. Эти уровни используются как ориентиры для входов и выходов.

2. **Сигналы входа:**
 - **Вход по пробою:** в стратегии пробоя трейдеры ищут момент, когда цена превышает 2-недельный максимум. Это бычий сигнал, предполагающий продолжение роста. Напротив, падение ниже 2-недельного минимума трактуется как медвежий сигнал и ожидаемое продолжение снижения.
 - **Вход по развороту:** в стратегии разворота трейдер ожидает возврат цены после обновления 2-недельного максимума или минимума. Подход направлен на извлечение прибыли из коррекционного движения после импульса пробоя.

3. **Сигналы выхода:**
 Выходные уровни задаются либо через трейлинг-стопы, либо через заранее определенные цели прибыли, основанные на процентном изменении относительно цены входа.

### Алгоритмическая реализация

Автоматизация стратегии 2-недельного максимума/минимума предполагает использование языков программирования и торговых платформ, способных исполнять сделки по заранее заданным алгоритмам. Примерный подход:

1. **Сбор данных:**
 Собрать исторические ценовые данные, сосредоточив внимание на последних 14 днях для определения максимума и минимума.

2. **Разработка стратегии:**
 - **Python и Pandas:** распространенная среда разработки стратегии. Библиотека Pandas удобна для работы с временными рядами.

 ```python
 import pandas as pd

 def calculate_2_week_high_low(df):
     df['2_week_high'] = df['Close'].rolling(window=14).max()
     df['2_week_low'] = df['Close'].rolling(window=14).min()
     return df
 ```

3. **Генерация сигналов:**
 Сформировать сигналы покупки и продажи, когда цена превышает 2-недельный максимум или опускается ниже 2-недельного минимума.

 ```python
 def generate_signals(df):
     df['Signal'] = 0
     df['Signal'][14:] = np.where(df['Close'][14:] > df['2_week_high'].shift(1)[14:], 1, 0)
     df['Signal'][14:] = np.where(df['Close'][14:] < df['2_week_low'].shift(1)[14:], -1, df['Signal'][14:])
     return df
 ```

4. **Бэктестинг:**
 Проверить стратегию на исторических данных:

 ```python
 def backtest_strategy(df):
     df['Returns'] = df['Close'].pct_change()
     df['Strategy_Returns'] = df['Signal'].shift(1) * df['Returns']
     return df

 result = pd.DataFrame()
 result['Cumulative_Strategy_Returns'] = (1 + backtest_strategy(stock_data)['Strategy_Returns']).cumprod() - 1
 ```

### Практические применения в торговле

1. **Следование за трендом:**
 На трендовых рынках стратегия 2-недельного максимума/минимума помогает извлекать выгоду из устойчивых направленных движений. Когда цена продолжает обновлять максимумы или минимумы в пределах 14 дней, стратегия подтверждает силу тренда.

2. **Пробои волатильности:**
 Стратегия полезна для выявления пробоев волатильности, когда цена выходит за ключевые уровни последних 2 недель. Трейдеры могут захватывать импульс, который обычно следует за такими пробоями.

3. **Контртрендовые подходы:**
 Хотя стратегия в основном применяется для поиска пробоев, некоторые трейдеры используют уровни 2-недельных максимумов/минимумов как зоны потенциального разворота. Например, достижение 2-недельного максимума может встретить сопротивление и привести к откату.

### Улучшения и вариации

Хотя базовая стратегия проста, ее часто улучшают для повышения точности:

1. **Дополнительные фильтры:**
 Использование фильтров, таких как скользящие средние или пороги объема, чтобы избегать ложных пробоев.

2. **Управление рисками:**
 Применение инструментов управления рисками, включая стоп-лосс и размер позиции, для снижения потенциальных потерь.

3. **Комбинация индикаторов:**
 Сочетание сигналов 2-недельного максимума/минимума с другими техническими индикаторами, такими как RSI или MACD, для более надежных сигналов.

### Инструменты и платформы

Различные инструменты и платформы помогают реализовывать стратегию:

1. **QuantConnect:** облачная платформа для разработки, бэктестинга и исполнения алгоритмических стратегий на нескольких языках программирования.
2. **TradingView:** удобный интерфейс для технического анализа и написания пользовательских стратегий на Pine Script.
3. **MetaTrader:** поддерживает алгоритмическую торговлю с языками MQL4/MQL5 для написания стратегий.

### Кейс

Рассмотрим гипотетическое применение:
- **Акция:** XYZ Inc.
- **Период:** 1 января 2023 — 1 марта 2023
- **Стратегия:** алгоритм покупает акцию при пробое 2-недельного максимума и шортит при пробое 2-недельного минимума.

#### Результаты:
- **Всего сделок:** 10
- **Прибыльных сделок:** 7
- **Убыточных сделок:** 3
- **Чистая прибыль:** 8%

Этот простой анализ демонстрирует эффективность стратегии, хотя в реальных рыночных условиях обычно применяются более сложные техники управления рисками и капиталом.

### Заключение

Стратегия 2-недельного максимума/минимума — простой, но эффективный подход, который легко адаптировать и внедрить в алгоритмические торговые системы. При корректной реализации и управлении рисками она служит полезным инструментом для захвата ценового импульса и торговли пробоями в разных рыночных условиях.
