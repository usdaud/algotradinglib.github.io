# Теория сожаления

Теория сожаления — это теория поведенческой экономики, которая исследует, как люди предвидят и справляются с сожалением, связанным с принятием решений в условиях неопределенности. В отличие от классических экономических теорий, которые предполагают, что агенты рациональны и всегда стремятся максимизировать ожидаемую полезность, теория сожаления утверждает, что эмоциональные факторы, такие как сожаление, значительно влияют на принятие решений.

## Историческая справка
Теория сожаления была представлена в середине 1980-х годов экономистами Грэмом Лумсом и Робертом Сагденом. Их исследование предоставило структуру для понимания того, как сожаление и его предвидение влияют на выбор людей, бросая вызов теории ожидаемой полезности, которая долго доминировала в экономической мысли.

## Ключевые компоненты теории сожаления

### Сожаление и радость
В теории сожаления существуют две основные эмоциональные реакции, управляющие принятием решений: сожаление и радость. Сожаление возникает, когда реализованный результат решения хуже, чем результат альтернативного выбора, который мог быть сделан. И наоборот, радость возникает, когда результат лучше, чем альтернативный выбор.

### Сравнительная природа
Фундаментальный аспект теории сожаления — ее сравнительная природа. Сожаление или радость не переживаются изолированно, а всегда в контексте отношений с другими возможными результатами.

### Модификация функции полезности
В теории ожидаемой полезности люди стремятся максимизировать свою полезность. Однако в теории сожаления функция полезности модифицируется для включения сожаления или радости. Таким образом, предвидимое сожаление или радость влияет на общую полезность, получаемую от конкретного выбора.

### Веса решений
Согласно теории сожаления, веса решений корректируются для учета потенциального сожаления. Это приводит к назначению различных вероятностей результатам по сравнению с теми, которые используются в традиционной максимизации ожидаемой полезности.

## Математическая формулировка

Полезность, `U`, испытываемая лицом, принимающим решение, может быть изображена как:

\[ U(a,x) = \sum_{s \in S} p(s) u(a, s) - R(a, x) \]

где:
- \( a \) — предпринятое действие,
- \( x \) — фактический результат,
- \( p(s) \) — вероятность состояния \( s \),
- \( u(a, s) \) — полезность от выполнения действия \( a \) в состоянии \( s \),
- \( R(a, x) \) — функция сожаления, которая количественно определяет сожаление от выбора действия \( a \), когда реализуется результат \( x \).

## Последствия для принятия решений

### Избегание риска и предпочтение определенности
Теория сожаления подразумевает, что люди могут демонстрировать более избегающее риск поведение, поскольку они пытаются минимизировать возможное сожаление. Таким образом, они могут предпочитать варианты с более определенными результатами, даже если они субоптимальны согласно теории ожидаемой полезности.

### Смещение к статус-кво
Люди могут придерживаться известного, хотя и субоптимального, решения, а не переключаться на потенциально лучшую, но неопределенную альтернативу, отражая смещение к статус-кво, обусловленное потенциальным сожалением.

### Перегрузка выбором
Теория сожаления может объяснить, почему люди могут страдать от перегрузки выбором. Чем больше вариантов у человека, тем больше потенциал для сожаления, что может привести к параличу решений.

## Применение в финансах и торговле

### Распределение активов
В распределении активов инвесторы могут предпочитать диверсифицированные портфели не только для оптимизации доходности, но и для распределения сожаления, связанного с любым отдельным неэффективным активом.

### Дизайн финансовых продуктов
Финансовые продукты могут быть разработаны для минимизации сожаления. Например, страховые продукты или структурированные продукты с некоторой гарантией капитала могут привлекать неприятие инвестора к потенциальному сожалению.

### Поведенческие финансы
Теория сожаления является основополагающей в поведенческих финансах, объясняя, почему инвесторы могут держаться за убыточные инвестиции, чтобы избежать сожаления, связанного с реализацией убытка.

## Алгоритмическая торговля

### Алгоритмы управления рисками
Стратегии алгоритмической торговли могут включать метрики сожаления для динамической корректировки экспозиции рисков. Алгоритмы могут уменьшать размеры сделок или перемещать распределение средств в более безопасные активы, если потенциальное сожаление превышает определенный порог.

### Обучение с подкреплением
Алгоритмы минимизации сожаления являются критической частью структур обучения с подкреплением. Эти алгоритмы стремятся минимизировать кумулятивное сожаление и широко используются в высокочастотной торговле для балансировки исследования и эксплуатации.

## Практические инструменты и структуры

### Алгоритмы минимизации сожаления
Несколько библиотек с открытым исходным кодом реализуют алгоритмы минимизации сожаления, такие как:
- **libact**: libact
- **OpenAI Baselines**: OpenAI Baselines

### Инструменты поддержки принятия решений
Инструменты поддержки принятия решений, которые включают теорию сожаления, также распространены. Эти инструменты используют прошлые данные, чтобы помочь прогнозировать потенциальное сожаление и давать соответствующие рекомендации.

## Пример расчета в теории сожаления

### Сценарий
Представьте себе инвестора, выбирающего между двумя акциями: акция A и акция B. Результаты (прибыль или убытки) зависят от рыночных условий:

- Если рынок благоприятный (с вероятностью 0,6), акция A возвращает $1000, а акция B возвращает $800.
- Если рынок неблагоприятный (с вероятностью 0,4), акция A теряет $500, а акция B теряет $200.

### Расчет
1. **Ожидаемая полезность без сожаления**:
 - Акция A: \(0.6 \times 1000 + 0.4 \times (-500) = 600 - 200 = 400\)
 - Акция B: \(0.6 \times 800 + 0.4 \times (-200) = 480 - 80 = 400\)

Без сожаления обе акции имеют одинаковую ожидаемую полезность.

2. **Расчет сожаления**:
 - Если выбрать акцию A и рынок неблагоприятный, сожаление составляет \(| -500 - (-200) | = 300\)
 - Если выбрать акцию B и рынок благоприятный, сожаление составляет \(| 800 - 1000 | = 200\)

3. **Включение сожаления в полезность**:
 Реализуем вес сожаления, \( R_w \), 0,5 для упрощения:
 - Акция A: \(0.6 \times 1000 + 0.4 \times (-500) - 0.4 \times 300 = 400 - 120 = 280\)
 - Акция B: \(0.6 \times 800 + 0.4 \times (-200) - 0.6 \times 200 = 400 - 120 = 280\)

Хотя обе снова кажутся равными, решение тонко меняется по мере изменения вероятностей и весов сожаления.

## Эмпирические исследования

### Финансовые решения
Исследования показали, что реальные инвесторы часто действуют в соответствии с теорией сожаления. Они могут чрезмерно диверсифицировать или избегать продажи убыточных акций, что соответствует поведению минимизации сожаления.

### Рыночное поведение
Теория сожаления также предоставляет понимание рыночных явлений, таких как пузыри и крахи, где коллективное сожаление или предвидение сожаления может привести к резким рыночным сдвигам.

## Критика и ограничения

- **Предположение о рациональности**: Традиционалисты утверждают, что акцентирование внимания на сожалении подрывает предположение о рациональности в экономике.
- **Сложное моделирование**: Точное моделирование и количественное определение сожаления сложно и вычислительно интенсивно.
- **Субъективность**: Сожаление и его влияние субъективны, сильно варьируются среди людей, что затрудняет обобщение.

---

В заключение, теория сожаления обогащает наше понимание принятия финансовых решений, учитывая эмоциональные измерения сожаления и радости. Этот нетрадиционный подход предлагает реалистичную перспективу, которая тесно соответствует наблюдаемому поведению на финансовых рынках, делая его ценным инструментом как для инвесторов, так и для финансовых аналитиков.
