# Адаптивная скользящая средняя

Адаптивная скользящая средняя (AMA), также известная как Kaufman Adaptive Moving Average (KAMA), - инструмент технического анализа, разработанный американским количественным финансовым теоретиком Перри Дж. Кауфманом в 1995 году. Он учитывает различие рыночных условий и динамически адаптируется к движению цены, сглаживая шум и уменьшая лаг. В отличие от традиционных скользящих средних, таких как SMA или EMA, которые имеют фиксированные периоды, AMA изменяет чувствительность на основе волатильности и трендов.

## Ключевые понятия

### Коэффициент эффективности (ER)

Один из основных элементов AMA - коэффициент эффективности (ER), который измеряет относительную эффективность движения цены за период и помогает адаптировать коэффициент сглаживания. ER рассчитывается по формуле:

\[ ER = \frac{\text{Изменение}}{\text{Волатильность}} \]

Где:
- **Изменение** - абсолютная величина разницы между текущей ценой и ценой n периодов назад.
- **Волатильность** - сумма абсолютных изменений цены за каждый период.

ER находится в диапазоне от 0 до 1:
- Высокий ER (близко к 1) означает устойчивый тренд, когда цена движется в одном направлении.
- Низкий ER (близко к 0) означает боковой рынок с меньшей направленностью.

### Коэффициент сглаживания (SC)

Для настройки AMA используется ER, который модифицирует коэффициент сглаживания (SC) и определяет скорость реакции средней на изменение цены. Формула:

\[ SC_{t} = (ER \times (FastestPeriod - SlowestPeriod) + SlowestPeriod)^2 \]

Обычно быстрый и медленный периоды берут, например, 2 и 30, но их можно изменить в зависимости от предпочтений трейдера.

### Расчет AMA

После определения ER и SC рассчитывается AMA:

\[ AMA_{t} = AMA_{t-1} + SC_{t} \times (Price_{t} - AMA_{t-1}) \]

Где:
- **AMA\(_{t}\)** - значение AMA в момент времени \( t \)
- **AMA\(_{t-1}\)** - значение AMA в момент времени \( t-1 \)
- **Price\(_{t}\)** - цена актива в момент времени \( t \)
- **SC\(_{t}\)** - коэффициент сглаживания в момент времени \( t \)

## Преимущества AMA

### Снижение шума

AMA умеет фильтровать рыночный шум. При низкой волатильности или отсутствии явного тренда она остается относительно плоской, уменьшая число ложных сигналов и рыночных "пил".

### Уменьшение лага

Поскольку AMA адаптируется к условиям рынка, она быстрее реагирует при сильных трендах и медленнее - в боковом рынке. Это снижает лаг по сравнению с традиционными скользящими средними и лучше отражает текущую динамику цены.

### Универсальность

AMA подходит для разных инструментов: акций, облигаций, товаров и форекса. Она эффективна как для длинных, так и для коротких трендов.

## Ограничения

Основной недостаток AMA - большая сложность по сравнению с классическими скользящими средними. Она требует понимания и аккуратной настройки параметров, таких как ER и SC, что может быть сложным для новичков.

## Реализация

### Пример на Python

Ниже приведен базовый пример реализации AMA на Python:

```python
import numpy as np

def AMA(prices, period_fast=2, period_slow=30):
    n = len(prices)
    ama = np.zeros(n)
    change = np.abs(prices - np.roll(prices, period_fast))
    volatility = np.sum(np.abs(prices - np.roll(prices, 1)))
    er = change / volatility

    sc = (er * (2 / (period_fast + 1) - 2 / (period_slow + 1)) + 2 / (period_slow + 1)) ** 2
    ama[0] = prices[0]

    for i in range(1, n):
        ama[i] = ama[i - 1] + sc[i] * (prices[i] - ama[i - 1])

    return ama

prices = np.array([1, 2, 2.5, 2, 1.5, 2.2, 2.8, 3.0, 3.2, 3.6, 3.9, 3.7, 3.8])
ama_values = AMA(prices)

print(ama_values)
```

### Программное обеспечение и инструменты

Многие платформы и торговые инструменты поддерживают AMA. Примеры:

- **MetaTrader 4/5**: популярная платформа среди форекс-трейдеров, поддерживает пользовательские индикаторы.
- **NinjaTrader**: торговая платформа с расширенными графиками и кастомными индикаторами.
- **TradingView**: онлайн-платформа с широким набором технических индикаторов и возможностью писать скрипты.

## Применение на практике

### Трендовые системы

AMA широко используется в трендовых системах. Трейдеры определяют начало и конец трендов, покупая при развороте AMA вверх и продавая при развороте вниз.

### Автоматизированные торговые системы

Благодаря адаптивности AMA отлично подходит для автоматизированных систем. Квантитативные трейдеры и алгоритмические компании часто включают ее в торговые алгоритмы. Компании вроде AlgoTrader (algotrader.com) предоставляют платформы, где AMA можно интегрировать в автоматические стратегии.

### Управление портфелем

Портфельные менеджеры используют AMA для управления рисками и повышения доходности, динамически корректируя позиции в соответствии с рыночными трендами. Это особенно полезно на волатильных рынках, где резкие движения цены сильно влияют на результаты.

### Скальпинг и внутридневная торговля

Внутридневные трейдеры и скальперы применяют AMA для выявления краткосрочных трендов и быстрых разворотов. Меньший лаг помогает захватывать возможности, которые могут быть неочевидны при использовании обычных скользящих средних.

## Заключение

Адаптивная скользящая средняя (AMA) - мощный инструмент технического анализа, который умеет подстраиваться под рыночные условия. Используя коэффициент эффективности и коэффициент сглаживания, AMA обеспечивает динамичное сглаживание цены, снижает шум и реагирует на движение быстрее традиционных средних. Однако ее сложность требует хорошего понимания и аккуратной настройки. Несмотря на ограничения, AMA остается универсальным и ценным инструментом для трейдеров и портфельных управляющих.

Для дополнительной информации можно обратиться к Перри Дж.
