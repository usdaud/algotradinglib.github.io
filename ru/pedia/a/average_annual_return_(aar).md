# Среднегодовая доходность (AAR)

Average Annual Return (AAR) — ключевая метрика в финансах, особенно в инвестициях и торговле. Она представляет собой арифметическое среднее ряда годовых доходностей за определенный период. В контексте алгоритмической торговли (algo-trading, automated trading) понимание и расчет AAR важны для оценки эффективности алгоритмов и стратегий во времени.

## Определение и важность

### Определение

AAR — это средняя сумма дохода или убытка, полученная инвестициями за каждый год в заданном периоде. Она дает «снимок» эффективности, позволяя сравнивать результаты с бенчмарками или другими инвестициями.

Математически AAR рассчитывается так:
\[ \text{AAR} = \frac{1}{N} \sum_{i=1}^{N} R_i \]

Где:
- \(N\) — количество лет.
- \(R_i\) — доходность в году \(i\).

### Важность

1. **Измерение эффективности**: для трейдеров и инвесторов, особенно использующих алгоритмические стратегии, AAR дает простой показатель эффективности.
2. **Сравнение с бенчмарком**: AAR упрощает сравнение стратегии с рыночными индикаторами, такими как индекс S&P 500.
3. **Оценка риска**: в сочетании со стандартным отклонением и коэффициентом Шарпа AAR помогает понимать профиль риск-доходности.
4. **Принятие решений**: помогает решать, продолжать, менять или прекращать стратегию или инвестицию.

## Примеры расчета

Предположим, торговый алгоритм дает годовые доходности за пять лет: 8%, 12%, -5%, 15% и 10%. Тогда:

\[ \text{AAR} = \frac{1}{5} (8\% + 12\% - 5\% + 15\% + 10\%) = \frac{1}{5} (40\%) = 8\% \]

Это означает, что среднегодовая доходность алгоритма составила 8%.

## Ограничения AAR

Хотя AAR полезна, у нее есть ограничения:

1. **Не учитывает компаундинг**: AAR не отражает эффект сложного процента, что может искажать картину. Этот недостаток компенсируется расчетом CAGR.
2. **Волатильность**: AAR не учитывает риск или волатильность доходностей. Две стратегии с одинаковым AAR могут иметь разный уровень риска.
3. **Прошлые результаты**: как и любая историческая метрика, AAR не гарантирует будущих результатов.

## Сравнение с CAGR

Compound Annual Growth Rate (CAGR) часто сравнивают с AAR:

### Определение CAGR

CAGR — среднегодовой темп роста с учетом сложного процента за период более одного года. Формула:
\[ \text{CAGR} = \left( \frac{V_f}{V_i} \right)^{\frac{1}{t}} - 1 \]

Где:
- \(V_f\) — конечное значение.
- \(V_i\) — начальное значение.
- \(t\) — число лет.

### Различия

1. **Компаундинг**: CAGR учитывает сложный процент и дает сглаженный темп роста.
2. **Траектория доходностей**: AAR игнорирует путь доходностей, тогда как CAGR учитывает геометрическую прогрессию до конечного значения.

Например, для той же серии доходностей и начальной инвестиции 1 000 долларов:

Year 1: $1,000 \times (1 + 0.08) = $1,080
Year 2: $1,080 \times (1 + 0.12) = $1,209.60
Year 3: $1,209.60 \times (1 - 0.05) = $1,149.12
Year 4: $1,149.12 \times (1 + 0.15) = $1,321.49
Year 5: $1,321.49 \times (1 + 0.10) = $1,453.64

Итак,
\[ \text{CAGR} = \left( \frac{1453.64}{1000} \right) ^ \frac{1}{5} - 1 = 7.76\% \]

AAR равна 8%, а CAGR ниже — 7,76%, что показывает влияние компаундинга.

## Применение в алгоритмической торговле

В алгоритмической торговле AAR — ключевая метрика бэктестинга. Разработчики используют ее для оценки исторической эффективности моделей.

### Бэктестинг стратегии

Бэктестинг — это запуск алгоритма на исторических данных для оценки результатов. Расчет AAR помогает определить жизнеспособность и устойчивость стратегии.

### Обзоры эффективности

Регулярная оценка эффективности действующих алгоритмов критична. AAR помогает выявлять отставание и потенциальные проблемы, позволяя вовремя корректировать стратегию.

### Управление рисками

Сравнение AAR с другими метриками риска помогает понять, оправдывают ли доходности риск. Интеграция AAR с волатильностью и анализом просадки создает более полный риск-профиль.

### Бенчмаркинг

Алгоритмические трейдеры часто сравнивают стратегии с индексами или собственными моделями. AAR дает простой, но сильный показатель для таких сравнений.

## Практические инструменты для расчета AAR

Несколько платформ и инструментов могут рассчитывать AAR для алгоритмических стратегий:

### QuantConnect

QuantConnect — платформа для алгоритмической торговли с поддержкой бэктестинга и реальной торговли. Она предоставляет встроенные функции для расчета метрик эффективности, включая AAR.

### Quantopian (архив)

Quantopian ранее была популярной платформой для алгоритмической торговли и бэктестинга. Несмотря на закрытие в ноябре 2020 года, она сыграла заметную роль в популяризации квантфинанса и может предоставлять образовательные материалы и API для исторических данных.

### AlphaStreams от CrunchDAO

AlphaStreams — маркетплейс алгоритмических стратегий, где инвесторы могут лицензировать и использовать квант-исследования. AAR — одна из метрик эффективности для оценки.

### Backtrader

Backtrader — популярная open-source библиотека Python для бэктестинга торговых стратегий. Она предоставляет множество метрик, включая AAR, и является мощным инструментом для индивидуальных трейдеров и разработчиков.

### MetaTrader 5 (MQL5)

MetaTrader 5 широко используется для алгоритмической торговли на форекс, акциях и фьючерсах. Платформа поддерживает расчет сложных метрик, и трейдеры могут создавать собственные скрипты для расчета AAR и других показателей.

## Заключение

Среднегодовая доходность (AAR) — фундаментальная метрика в финансах и торговле, дающая простой, но мощный показатель эффективности во времени. Для алгоритмических трейдеров понимание AAR критично при оценке стратегий, управлении рисками и принятии решений. Несмотря на ограничения, особенно по компаундингу и волатильности, AAR остается важным инструментом количественных финансов. Совмещая AAR с другими метриками эффективности, трейдеры получают более полное представление о надежности и эффективности своих стратегий.
