# Средняя доходность

## Введение

Средняя доходность — базовое понятие в финансах и инвестициях, особенно в алгоритмической торговле. Оно дает представление об исторической эффективности актива, портфеля или стратегии. Средняя доходность — мера центральной тенденции доходностей за определенный период. Ее можно рассчитывать разными способами в зависимости от задач анализа.

## Типы средней доходности

### Арифметическая средняя доходность

Арифметическая средняя доходность — самый простой способ. Она рассчитывается как сумма доходностей, деленная на число периодов. Для набора из \( n \) доходностей \( R_1, R_2, \ldots, R_n \):

\[
 \text{Арифметическая средняя доходность} = \frac{1}{n} \sum_{i=1}^{n} R_i
\]

Этот показатель подходит для краткосрочного анализа, где эффект компаундинга минимален. Он дает простую оценку эффективности и часто применяется в бэктестинге.

### Геометрическая средняя доходность

Геометрическая средняя доходность, также известная как CAGR, лучше подходит для долгосрочной оценки. Она учитывает эффект сложного процента. Формула:

\[
 \text{Геометрическая средняя доходность} = \left( \prod_{i=1}^{n} (1 + R_i) \right)^\frac{1}{n} - 1
\]

Этот метод более точен для оценки устойчивости доходности, сглаживает волатильность и показывает тренды роста.

### Метод Modified Dietz

Метод Modified Dietz — приближенный подход, учитывающий внешние денежные потоки. Он особенно полезен, когда в портфеле есть значительные притоки или оттоки. Формула:

\[
 \text{Доходность Modified Dietz} = \frac{EMV - BMV - C}{BMV + wC}
\]

- \( EMV \) — конечная рыночная стоимость.
- \( BMV \) — начальная рыночная стоимость.
- \( C \) — чистый внешний денежный поток.
- \( w \) — весовой коэффициент, равный доле периода, в течение которой присутствует поток.

## Применения в алгоритмической торговле

Алгоритмические стратегии используют математические модели для исполнения сделок на скорости и частоте, недоступных человеку. Метрики средней доходности лежат в основе оценки, бэктестинга и оптимизации стратегий.

### Бэктестинг

Бэктестинг — запуск алгоритма на исторических данных для оценки жизнеспособности. Средние доходности, особенно арифметическая и геометрическая, важны для понимания того, как стратегия могла бы работать в прошлом.

### Управление рисками

Анализ доходностей помогает уточнять риск-менеджмент. Зная средние доходности, можно проектировать стратегии с приемлемым уровнем риска и задавать пороги для просадок, стоп-лоссов и тейк-профитов.

### Метрики эффективности

Средние доходности необходимы для расчета показателей эффективности, таких как коэффициент Шарпа, учитывающий риск (стандартное отклонение доходностей):

\[
 \text{Коэффициент Шарпа} = \frac{R_p - R_f}{\sigma_p}
\]

где \( R_p \) — средняя доходность портфеля, \( R_f \) — безрисковая ставка, \( \sigma_p \) — стандартное отклонение доходностей портфеля.

### Оптимизация портфеля

В современной портфельной теории средние доходности лежат в основе построения оптимального портфеля. Оптимизация среднее-дисперсия использует ожидаемые доходности (геометрические) и ковариацию доходностей, чтобы максимизировать результат при заданном риске:

\[
 \text{Целевая функция оптимизации:} \quad \max_w \left( w^T \mu - \lambda w^T \Sigma w \right)
\]

- \( w \) — вектор весов.
- \( \mu \) — вектор средних доходностей.
- \( \Sigma \) — ковариационная матрица.
- \( \lambda \) — коэффициент риск-аверсии.

## Крупные институты и платформы

### Bloomberg LP

Bloomberg Terminal предоставляет трейдерам комплексные данные и инструменты для анализа средней доходности и других метрик. Платформа поддерживает бэктестинг и анализ в реальном времени.

### StockSharp

StockSharp — известная платформа алгоритмической торговли с возможностями бэктестинга и реальной торговли. Она использует расчет средней доходности в модуле оценки эффективности.

### Interactive Brokers

Interactive Brokers предоставляет API и мощные торговые платформы для алгоритмических трейдеров. Исторические средние доходности используются для настройки автоматизированных систем.

### QuantInsti

QuantInsti — образовательная организация, предлагающая программы по алгоритмической торговле. Она подчеркивает важность средних доходностей при разработке и оценке торговых моделей.

### TradeStation

TradeStation предлагает инструменты для бэктестинга и разработки пользовательских алгоритмов, включая функции расчета исторических и средних доходностей.

## Заключение

Понимание и расчет средней доходности в разных формах — арифметической, геометрической и Modified Dietz — крайне важны для инвесторов и алгоритмических трейдеров. Эти расчеты дают критически важные инсайты о результативности финансовых активов и помогают в разработке стратегий, управлении рисками, оптимизации портфеля и оценке эффективности. Интеграция метрик средней доходности в ведущие торговые платформы подтверждает их ключевую роль в алгоритмической торговле.
