# Автоматизированный маркет-мейкер (AMM)

Автоматизированный маркет-мейкер — это механизм торговли в децентрализованных финансах, который обеспечивает ликвидность через формулу ценообразования, а не через традиционную книгу заявок. Пользователи торгуют с пулом ликвидности, а не с контрагентом.

## Модель ценообразования

Наиболее распространенный AMM использует формулу постоянного произведения:
- x * y = k
где x и y — количества двух активов в пуле, а k — константа. Сделка изменяет балансы пула и смещает цену.

## Поставщики ликвидности

Поставщики ликвидности вносят активы в пул и получают комиссии от сделок. Их доходность зависит от объема торгов и относительного движения цен активов в пуле.

## Имперманентный убыток

Если цена одного актива сильно меняется относительно другого, поставщики ликвидности могут понести имперманентный убыток по сравнению с простым удержанием активов. Комиссии могут компенсировать этот убыток, но это ключевой риск участия в AMM.

## Торговые соображения

AMM может обеспечивать непрерывную ликвидность, но чувствителен к крупным сделкам, которые создают проскальзывание. Арбитражные трейдеры играют ключевую роль, выравнивая цены AMM с внешними рынками.

## Механика пулов

Большинство AMM используют ценовую кривую, связывающую два актива пула. В модели постоянного произведения x * y = k, где x и y — балансы пула. Сделка изменяет балансы и, следовательно, цену.

Некоторые пулы используют другие кривые или веса, что меняет реакцию цены на сделку и рост проскальзывания с увеличением размера.

## Комиссии и проскальзывание

Поставщики ликвидности получают комиссии от сделок, и эти комиссии — основной источник доходности. Проскальзывание увеличивается по мере роста размера сделки относительно пула. Трейдеры часто дробят заявки или используют маршрутизацию, чтобы снизить проскальзывание.

## Имперманентный убыток

Имперманентный убыток измеряет разницу между удержанием активов и предоставлением ликвидности. Простая аппроксимация показывает, что большие относительные движения цен приводят к большим потерям. Комиссии могут их компенсировать, но риск остается.

Трейдерам следует оценивать имперманентный убыток в стрессовых сценариях, а не полагаться на средние условия.

## Риски и меры защиты

Ключевые риски включают риски смарт-контрактов, риски оракулов и изменения управления протоколом. Использование проверенных пулов, диверсификация по площадкам и мониторинг состояния пула снижают риск.

## Пример сценария

Рассмотрим ликвидный инструмент со стабильными спредами и средней волатильностью. Реализацию на основе правил можно протестировать на многолетней выборке, а затем на вневыборочном периоде. Цель — убедиться, что поведение Automated Market Maker (AMM) устойчиво в разных режимах и что преимущество не зависит от узкого набора условий.

## Контрольный список реализации

- Подтвердить качество данных и согласованность временных меток
- Описать правила входа и выхода простым языком
- Проверить размер позиции и лимиты риска
- Отслеживать издержки исполнения и проскальзывание
- Проанализировать эффективность по режимам и инструментам

## Пример сценария

Рассмотрим ликвидный инструмент со стабильными спредами и средней волатильностью. Реализацию на основе правил можно протестировать на многолетней выборке, а затем на вневыборочном периоде. Цель — убедиться, что поведение Automated Market Maker (AMM) устойчиво в разных режимах и что преимущество не зависит от узкого набора условий.

## Контрольный список реализации

- Подтвердить качество данных и согласованность временных меток
- Описать правила входа и выхода простым языком
- Проверить размер позиции и лимиты риска
- Отслеживать издержки исполнения и проскальзывание
- Проанализировать эффективность по режимам и инструментам

## Операционные заметки

Определения и соглашения должны быть едиными для наборов данных и площадок. Небольшие различия в полях данных или границах сессий могут менять результаты, особенно для краткосрочных стратегий. Документируйте входные данные и допущения, чтобы результаты можно было воспроизвести.

Если концепция зависит от биржевых правил или поведения брокера, уточните эти правила для конкретной площадки. Операционные детали часто объясняют, почему сделка повела себя иначе, чем ожидалось.

## Стрессовые сценарии

Во время всплесков волатильности ликвидность может исчезать, а ценовые разрывы — появляться. В таких условиях индикаторы могут запаздывать, типы заявок — срабатывать неправильно, а спреды — резко расширяться.

Тестирование идеи на быстрых рынках, тонкой ликвидности и внезапных новостях помогает выявить скрытые риски. Если стратегия работает только в спокойных условиях, размер и тайминг должны это учитывать.

## Советы по документированию

Сохраняйте короткий чек-лист правил, параметров и точек решений. Фиксируйте, как концепция используется в живой торговле, и сравнивайте это с предположениями бэктеста. Это упрощает дальнейшую доработку и снижает дрейф исполнения.

## Частые вопросы

Трейдеры часто спрашивают, насколько результаты чувствительны к выбору параметров, как концепция ведет себя в разных режимах и масштабируется ли с размером. Ответы на эти вопросы на раннем этапе повышают надежность и предотвращают переобучение.

## Чек-лист

- Определить точное правило простым языком
- Проверить качество данных и тайминг
- Оценить издержки исполнения
- Установить лимиты риска и логику стопов
- Проанализировать эффективность по режимам
