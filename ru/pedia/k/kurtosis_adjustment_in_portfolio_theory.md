# Теория портфеля Марковица

Теория портфеля Марковица, также известная как современная портфельная теория (MPT), - это инвестиционная теория, разработанная Гарри Марковицем в 1952 году. Эта теория подчеркивает роль диверсификации для эффективного управления рисками и оптимизации доходности в портфеле активов. Основной принцип MPT заключается в том, что инвестор может одновременно рассматривать риск и доходность через статистические меры, позволяя им строить "эффективную границу" оптимальных портфелей, предлагающих максимальную ожидаемую доходность для данного уровня риска.

## Ключевые концепции теории портфеля Марковица

### 1. Ожидаемая доходность
Ожидаемая доходность - это взвешенное среднее вероятных доходностей активов в портфеле. Веса - это доли общей стоимости портфеля, инвестированные в каждый актив.

Формула:
\[ E(R_p) = \sum_{i=1}^{n} w_i E(R_i) \]
Где:
- \(E(R_p)\) - ожидаемая доходность портфеля,
- \(w_i\) - доля портфеля, инвестированная в актив \(i\),
- \(E(R_i)\) - ожидаемая доходность актива \(i\).

### 2. Риск (дисперсия и стандартное отклонение)
Риск в MPT в основном измеряется дисперсией или стандартным отклонением доходности. Дисперсия измеряет разброс доходности актива или портфеля, в то время как стандартное отклонение является квадратным корнем из дисперсии, обеспечивая меру разброса в той же единице, что и доходность.

Формула для дисперсии портфеля:

\[ \sigma_p^2 = \sum_{i=1}^{n} \sum_{j=1}^{n} w_i w_j \sigma_{ij} \]
Где:
- \(\sigma_p^2\) - дисперсия портфеля,
- \(w_i\) и \(w_j\) - веса активов \(i\) и \(j\) в портфеле,
- \(\sigma_{ij}\) - ковариация между доходностями активов \(i\) и \(j\).

Ковариация измеряет, как два актива движутся относительно друг друга. Положительная ковариация означает, что активы движутся вместе, в то время как отрицательная ковариация означает, что они движутся обратно.

### 3. Диверсификация
Диверсификация включает распределение инвестиций по различным активам для снижения риска. Согласно MPT, диверсификация снижает риск портфеля, поскольку несистематический риск отдельных активов может быть минимизирован.

### 4. Эффективная граница
Эффективная граница представляет собой набор портфелей, которые обеспечат наивысшую ожидаемую доходность для данного уровня риска. Портфели вдоль этой границы считаются оптимально диверсифицированными.

### 5. Линия рынка капитала (CML) и линия рынка ценных бумаг (SML)
Линия рынка капитала расширяет концепцию эффективной границы, включая безрисковый актив. Она представляет портфели, которые оптимально сочетают риск и доходность, когда безрисковый актив включен. Линия рынка ценных бумаг, с другой стороны, представляет ожидаемую доходность актива как функцию его беты с рыночным портфелем (систематический риск).

## Применение MPT в алгоритмической торговле
В алгоритмической торговле теория портфеля Марковица может использоваться для автоматизации выбора и ребалансирования портфелей для оптимизации доходности при данном уровне риска.
- **Автоматизированное построение портфеля**: Используя MPT, алгоритмы могут строить портфели, которые позиционированы на эффективной границе, обеспечивая оптимальную диверсификацию и управление рисками.
- **Алгоритмы управления рисками**: Включая дисперсию и ковариацию в алгоритмические модели, трейдеры могут лучше управлять и смягчать риск.
- **Алгоритмы ребалансирования**: Автоматизированные системы могут периодически корректировать веса портфеля для поддержания оптимального профиля риск-доходность по мере изменения рыночных условий.

## Программное обеспечение и инструменты, реализующие MPT
Несколько платформ финансового программного обеспечения и инструментов реализуют теорию портфеля Марковица, предлагая индивидуальным и институциональным инвесторам инструменты для оптимизации своих портфелей.

### Примеры платформ:
- **Kensho**: Предоставляет комплексную аналитику, управляемую искусственным интеллектом, включая оптимизацию портфеля с использованием MPT.
- **Portfolio Visualizer**: Надежный инструмент для бэктестинга и оптимизации портфеля, включающий принципы MPT.
- **QuantConnect**: Платформа с открытым исходным кодом, которая позволяет алгоритмическим трейдерам создавать, тестировать и развертывать алгоритмы, включая те, которые основаны на MPT.

## Продвинутые соображения
### 1. Ограничения в MPT
Практические портфели могут сталкиваться с ограничениями, такими как минимальные/максимальные уровни инвестиций, ограничения по секторам и налоговые соображения. Эти реальные ограничения могут быть включены в MPT с использованием таких методов, как квадратичное программирование.

### 2. Включение альтернативных активов
Помимо традиционных акций и облигаций, современные инвесторы могут включать альтернативные активы, такие как недвижимость, товары и частный капитал. Эти активы часто имеют различные распределения доходности и корреляции, которые могут быть включены в модели MPT для дальнейшего улучшения диверсификации.

### 3. Поведенческие факторы
MPT предполагает рациональное поведение и эффективные рынки. Однако поведенческие финансы подчеркивают, что инвесторы часто проявляют иррациональное поведение, а рынки могут быть затронуты настроениями. Включение поведенческих факторов в оптимизацию портфеля - это развивающаяся область, стремящаяся решить эти ограничения.

### 4. Динамическое распределение портфеля
Статическое распределение портфеля может не адаптироваться хорошо к меняющимся рыночным условиям. Модели динамического распределения портфеля корректируют веса активов в ответ на изменения рынка, макроэкономические индикаторы и другие переменные, стремясь постоянно держать портфель на эффективной границе.

## Критика и ограничения
Теория портфеля Марковица, будучи фундаментальной, подвергалась критике и развивалась со временем. Некоторые ключевые критические замечания включают:
- **Предположение о нормальном распределении доходности**: MPT предполагает, что доходности распределены нормально, что может не быть верным для всех активов, особенно на турбулентных рынках, где риски хвостов выделяются.
- **Ошибки оценки**: Точная оценка входных данных (ожидаемых доходностей, дисперсий и ковариаций) сложна, и ошибки могут привести к неоптимальным портфелям.
- **Игнорирование высших моментов**: Традиционная MPT учитывает только среднее и дисперсию, но высшие моменты распределения доходности, такие как асимметрия и эксцесс, также могут влиять на инвестиционные решения.

## Заключение
Теория портфеля Марковица заложила основу для современных инвестиционных стратегий, введя структурированный подход к оптимизации риска и доходности через диверсификацию. Несмотря на свои ограничения и развивающуюся природу финансовых рынков, принципы MPT остаются неотъемлемой частью управления портфелем и стратегий алгоритмической торговли. Ее применения и улучшения продолжают развиваться, включая новые активы, методы и поведенческие инсайты, поддерживая таким образом ее актуальность в постоянно развивающемся мире финансов.
