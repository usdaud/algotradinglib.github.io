# Крест Харами

Крест Харами — это широко признанный паттерн свечной модели в техническом анализе, который может быть инструментальным в определении потенциальных разворотов в ценовом тренде финансового рынка. Сам термин "харами" происходит от японского слова "беременная", что отражает визуальный вид паттерна. Паттерн Крест Харами является специфическим типом паттерна Харами и представляет собой двухсвечную формацию, сигнализирующую о возможном изменении направления рынка. Учитывая его значимость и нюансированную интерпретацию, этот паттерн внимательно отслеживается трейдерами, использующими алгоритмические торговые стратегии, стремящимися усовершенствовать точность своих входов и выходов на рынке.

## Структура и характеристики

Формация Креста Харами состоит из двух специфических свечей:

1. **Первая свеча**: Это свеча с большим телом, указывающая на сильное бычье (белое/зеленое) или медвежье (черное/красное) движение.
2. **Вторая свеча**: Это доджи — свеча, где цены открытия и закрытия почти одинаковы, создавая очень маленькое тело. Доджи должен содержаться внутри тела первой свечи, сигнализируя о нерешительности среди трейдеров.

### Бычий Крест Харами

Бычий Крест Харами возникает в нисходящем тренде и предполагает потенциальный разворот в восходящий тренд. Первая свеча — длинная медвежья свеча, показывающая, что продавцы были в контроле. На следующий день появляется доджи внутри тела предыдущей свечи, указывая на нерешительность среди участников рынка. Появление доджи предполагает, что давление продаж может уменьшаться, возможно, приводя к развороту вверх.

### Медвежий Крест Харами

Медвежий Крест Харами проявляется в восходящем тренде и сигнализирует о возможном переходе к нисходящему тренду. Первая свеча — длинная бычья свеча, подчеркивающая контроль покупателей. На следующий день появляется доджи внутри тела первой свечи, показывая состояние нерешительности. Наличие доджи означает снижение давления покупок, подразумевая, что разворот вниз может быть близок.

## Интерпретация и торговая стратегия

Крест Харами значим, поскольку он подчеркивает период рыночной нерешительности, который часто предшествует развороту. Трейдеры, использующие этот паттерн как часть своей стратегии, обычно ищут подтверждение перед входом в сделку:

1. **Подтверждение**: Это может быть в различных формах, таких как гэп в направлении ожидаемого разворота, высокий объем торгов или последующая свеча, которая пробивает максимум или минимум доджи.
2. **Установка стоп-лосса**: Для бычьего Креста Харами обычно стоп-лосс размещается ниже минимума первой свечи. Для медвежьего Креста Харами стоп-лосс часто размещается выше максимума первой свечи.
3. **Цели прибыли**: Трейдеры могут устанавливать цели прибыли на основе уровней коррекции Фибоначчи, предыдущих уровней поддержки/сопротивления или фиксированного соотношения риска к вознаграждению.

## Применение в алгоритмической торговле

В контексте алгоритмической торговли паттерн Крест Харами может быть закодирован в торговый алгоритм для автоматизации решений о покупке и продаже. Такой алгоритм обычно включает:

1. **Распознавание паттернов**: Использование исторических данных о цене для идентификации двухсвечной формации Креста Харами.
2. **Требования к подтверждению**: Реализация правил для дополнительного подтверждения перед выполнением сделок для фильтрации ложных сигналов.
3. **Управление рисками**: Включение автоматизированных правил стоп-лосса и тейк-профита для управления риском и фиксации прибыли.
4. **Бэктестинг**: Применение алгоритма к историческим данным для оценки его производительности и внесения необходимых корректировок.

### Пример: Стратегия алгоритмической торговли

**Шаг 1**: Идентификация паттерна Крест Харами в исторических данных о ценах.
```python
def identify_harami_cross(data):
    patterns = []
    for i in range(1, len(data)):
        if is_doji(data[i]) and within_candle_body(data[i], data[i-1]):
            patterns.append((data[i-1], data[i]))
    return patterns

def is_doji(candle):
    return abs(candle['close'] - candle['open']) < 0.1 * (candle['high'] - candle['low'])

def within_candle_body(doji, previous_candle):
    return (doji['high'] <= previous_candle['high'] and
            doji['low'] >= previous_candle['low'])
```

**Шаг 2**: Определение критериев подтверждения и правил выполнения сделки.
```python
def confirm_and_trade(patterns, data):
    trades = []
    for pattern in patterns:
        index = data.index(pattern[1])
        if confirmation(data, index):
            action = 'buy' if pattern[0]['close'] < pattern[0]['open'] else 'sell'
            stop_loss = data[index+1]['low'] if action == 'buy' else data[index+1]['high']
            trade = execute_trade(action, data[index+2], stop_loss)
            trades.append(trade)
    return trades

def confirmation(data, index):
    if index + 2 >= len(data):
        return False
    return data[index+2]['close'] > data[index+1]['high'] if data[index+1]['close'] < data[index+1]['open'] else data[index+2]['close'] < data[index+1]['low']

def execute_trade(action, entry_candle, stop_loss):
    return {
        'action': action,
        'entry_price': entry_candle['open'],
        'stop_loss': stop_loss,
        'timestamp': entry_candle['timestamp']
    }
```

**Шаг 3**: Бэктестинг алгоритма на исторических данных.
```python
historical_data = load_historical_data()
patterns = identify_harami_cross(historical_data)
trades = confirm_and_trade(patterns, historical_data)

for trade in trades:
    print(trade)
```

## Реальные применения и инструменты

Платформы и инструменты алгоритмической торговли позволяют трейдерам внедрять и автоматизировать стратегии, основанные на Кресте Харами и других паттернах. Некоторые широко используемые платформы включают:

- **MetaTrader (MT4/MT5)**: Популярен среди форекс и CFD трейдеров, поддерживает пользовательские индикаторы и торговые скрипты.
- **NinjaTrader**: Надежная платформа для торговли фьючерсами и форексом, предлагающая обширные возможности бэктестинга и автоматизации.
- **QuantConnect**: Платформа алгоритмической торговли с открытым исходным кодом, предоставляющая данные, среды программирования и инструменты бэктестинга для разработки и тестирования торговых алгоритмов.

## Заключение

Крест Харами является мощным инструментом в арсенале технических аналитиков и алгоритмических трейдеров. Распознавая паттерн и понимая его значение, трейдеры могут предвидеть потенциальные развороты рынка и улучшать свои торговые стратегии. Интеграция этого паттерна в алгоритмический подход позволяет систематическую и свободную от эмоций торговлю, используя скорость и точность автоматизированных систем для извлечения выгоды из рыночных возможностей.
