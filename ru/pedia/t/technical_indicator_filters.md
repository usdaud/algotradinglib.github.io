# Фильтры технических индикаторов

Фильтры технических индикаторов являются важными инструментами в мире алгоритмической торговли (также известной как алго-трейдинг или электронная торговля). Эти фильтры используют статистические методологии и аналитику данных для помощи трейдерам в принятии более обоснованных решений. Интегрируя технические индикаторы, трейдеры могут отфильтровать рыночный шум и определить наиболее перспективные торговые возможности.

## Понимание фильтров технических индикаторов

Фильтры технических индикаторов — это алгоритмы, которые анализируют исторические рыночные данные, такие как цена и объем, для выявления паттернов и трендов. Эти паттерны помогают трейдерам прогнозировать будущие рыночные движения. Обычно технические индикаторы можно разделить на три основных типа:

1. **Индикаторы тренда**: Они помогают идентифицировать направление рынка. Примеры включают скользящие средние (SMA и EMA) и индекс среднего направления (ADX).
2. **Индикаторы импульса**: Они измеряют скорость изменения цены актива. Примеры включают индекс относительной силы (RSI) и схождение-расхождение скользящих средних (MACD).
3. **Индикаторы волатильности**: Они оценивают степень вариации цены за данный период. Примеры включают полосы Боллинджера и средний истинный диапазон (ATR).

Используя эти технические индикаторы в алго-торговых стратегиях, торговая система может автоматически генерировать сигналы покупки или продажи на основе предопределенных критериев, повышая эффективность и производительность торгового процесса.

## Типы фильтров технических индикаторов

### Скользящие средние (MA)
Скользящие средние являются одними из самых простых и часто используемых фильтров технических индикаторов. Усредняя цены активов за определенный период, эти индикаторы сглаживают краткосрочные колебания и подчеркивают долгосрочные тренды.

- **Простое скользящее среднее (SMA)**: Рассчитывается путем сложения цен закрытия за определенный период и деления на количество периодов.
- **Экспоненциальное скользящее среднее (EMA)**: Придает больший вес последним ценам, что делает его более чувствительным к новой информации.

#### Пример реализации:
```python
def SMA(prices, period):
    return sum(prices[-period:]) / period

def EMA(prices, period):
    ema = []
    k = 2 / (period + 1)
    ema.append(prices[0])  # начиная с первой цены для простоты
    for price in prices[1:]:
        ema.append(price * k + ema[-1] * (1 - k))
    return ema
```

### Индекс относительной силы (RSI)
RSI — это осциллятор импульса, который измеряет скорость и изменение ценовых движений. Он варьируется от 0 до 100 и обычно используется для определения перекупленных или перепроданных условий.

- Уровни выше 70 часто указывают на перекупленность.
- Уровни ниже 30 часто указывают на перепроданность.

#### Пример реализации:
```python
def RSI(prices, period=14):
    deltas = [prices[i] - prices[i-1] for i in range(1, len(prices))]
    seed = deltas[:period]

    up = sum([x for x in seed if x > 0]) / period
    down = -sum([x for x in seed if x < 0]) / period
    rs = up / down

    rsi = [100 - 100 / (1 + rs)]

    for delta in deltas[period:]:
        if delta > 0:
            up_val = delta
            down_val = 0
        else:
            up_val = 0
            down_val = -delta

        up = (up * (period - 1) + up_val) / period
        down = (down * (period - 1) + down_val) / period

        rs = up / down
        rsi.append(100 - 100 / (1 + rs))

    return rsi
```

### Схождение-расхождение скользящих средних (MACD)
MACD — это индикатор импульса, который показывает взаимосвязь между двумя скользящими средними цены ценной бумаги. Он рассчитывается путем вычитания 26-периодной EMA из 12-периодной EMA.

- **Линия MACD** = 12-периодная EMA - 26-периодная EMA
- **Сигнальная линия** = 9-периодная EMA линии MACD
- **Гистограмма** = Линия MACD - Сигнальная линия

#### Пример реализации:
```python
def MACD(prices, short_period=12, long_period=26, signal_period=9):
    short_ema = EMA(prices, short_period)
    long_ema = EMA(prices, long_period)
    macd_line = [short - long for short, long in zip(short_ema, long_ema)]
    signal_line = EMA(macd_line, signal_period)
    histogram = [macd - signal for macd, signal in zip(macd_line, signal_line)]

    return macd_line, signal_line, histogram
```

### Полосы Боллинджера
Полосы Боллинджера — это полосы волатильности, размещенные выше и ниже скользящего среднего. Они состоят из:

- Средней полосы, являющейся простым скользящим средним.
- Верхней полосы на MA плюс два раза дневное стандартное отклонение.
- Нижней полосы на MA минус два раза дневное стандартное отклонение.

#### Пример реализации:
```python
import numpy as np

def Bollinger_Bands(prices, period=20, num_of_sd=2):
    sma = SMA(prices, period)
    rolling_std = np.std(prices[-period:])

    upper_band = sma + (rolling_std * num_of_sd)
    lower_band = sma - (rolling_std * num_of_sd)

    return upper_band, sma, lower_band
```

### Средний истинный диапазон (ATR)
ATR измеряет рыночную волатильность, разлагая весь диапазон цены актива за данный период. Истинный диапазон:

- **Истинный диапазон**: Максимум из (Максимум - Минимум, Максимум - Предыдущее закрытие, Предыдущее закрытие - Минимум)
- **ATR**: Среднее истинного диапазона за указанный период.

#### Пример реализации:
```python
def ATR(highs, lows, closes, period=14):
    tr_list = [max(h-l, abs(h-pc), abs(l-pc)) for h, l, pc in zip(highs, lows, closes[1:])]
    atr = [sum(tr_list[:period]) / period]

    for tr in tr_list[period:]:
        atr.append((atr[-1] * (period - 1) + tr) / period)

    return atr
```

## Практические применения

### Сигналы входа и выхода
Фильтры технических индикаторов в основном используются для генерации сигналов входа и выхода в алго-торговых системах. Например, если линия MACD пересекает сигнальную линию сверху, она может генерировать сигнал покупки, в то время как пересечение снизу может генерировать сигнал продажи.

### Управление рисками
Технические индикаторы также применяются в управлении рисками. Например, полосы Боллинджера могут помочь определить волатильность и тем самым определить уровни стоп-лосса, обеспечивая минимизацию потенциальных потерь.

### Оптимизация портфеля
Продвинутые технические индикаторы могут помочь в оптимизации портфеля, оценивая силу различных активов в портфеле, тем самым помогая перераспределить капитал в сторону более высокодоходных активов.

## Реальные реализации

### QuantConnect
QuantConnect — это платформа количественной торговли, известная интеграцией различных технических индикаторов в свою структуру алгоритмической торговли. Трейдеры могут внедрять и тестировать свои стратегии, используя широкий спектр встроенных технических индикаторов. Посетите QuantConnect здесь.

### MetaTrader
MetaTrader 4 и MetaTrader 5 — популярные торговые платформы, которые поддерживают алгоритмическую торговлю. Они содержат множество встроенных технических индикаторов и предоставляют возможности для разработки пользовательских индикаторов и торговых ботов с использованием языков MQL4 и MQL5. Посетите MetaTrader здесь и здесь.

### TradingView
TradingView — это еще одна мощная платформа, которая интегрирует технические индикаторы с функциями социальных сетей, позволяя трейдерам делиться идеями и стратегиями. Платформа поддерживает пользовательское написание сценариев через Pine Script, обеспечивая продвинутую алгоритмическую торговлю. Посетите TradingView здесь.

## Заключение

Фильтры технических индикаторов незаменимы для стратегий алгоритмической торговли, предлагая сложные инструменты для анализа рыночных данных и генерации действенных торговых сигналов. От скользящих средних до полос Боллинджера эти фильтры облегчают более точное принятие решений и эффективное управление рисками. По мере развития технологий будет развиваться и интеграция и применение продвинутых технических индикаторов, укрепляя их роль в будущем финансовой торговли.
